<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Benchmark ai:check — Relatório de Eficiência de Tokens</title>
        <style>
            :root {
                --primary: #1e3a5f;
                --primary-light: #2d5a8f;
                --accent-green: #22c55e;
                --accent-amber: #f59e0b;
                --accent-red: #ef4444;
                --cat-mixed: #3b82f6;
                --cat-lint-only: #22c55e;
                --cat-ts-only: #8b5cf6;
                --cat-lint-heavy: #f97316;
                --cat-ts-heavy: #ef4444;
                --bg: #f8fafc;
                --bg-card: #ffffff;
                --bg-card2: #f1f5f9;
                --text-primary: #0f172a;
                --text-secondary: #475569;
                --text-muted: #94a3b8;
                --border: #e2e8f0;
                --border-light: #f1f5f9;
                --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
                --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.1);
                --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.14);
                --radius: 12px;
                --radius-sm: 8px;
                --radius-lg: 20px;
                --nav-h: 64px;
                --font:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    Helvetica, Arial, sans-serif;
                --mono:
                    "SF Mono", "Fira Code", "Fira Mono", "Roboto Mono",
                    Consolas, monospace;
            }

            @media (prefers-color-scheme: dark) {
                :root {
                    --bg: #0f172a;
                    --bg-card: #1e293b;
                    --bg-card2: #162032;
                    --text-primary: #f1f5f9;
                    --text-secondary: #94a3b8;
                    --text-muted: #475569;
                    --border: #334155;
                    --border-light: #1e293b;
                    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
                    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
                    --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.5);
                }
            }

            *,
            *::before,
            *::after {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            html {
                scroll-behavior: smooth;
                font-size: 16px;
            }

            body {
                font-family: var(--font);
                background: var(--bg);
                color: var(--text-primary);
                line-height: 1.6;
                overflow-x: hidden;
            }

            /* ── NAV ── */
            nav {
                position: sticky;
                top: 0;
                z-index: 1000;
                height: var(--nav-h);
                background: var(--primary);
                display: flex;
                align-items: center;
                padding: 0 24px;
                gap: 8px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
            }

            .nav-brand {
                font-weight: 700;
                font-size: 1rem;
                color: #fff;
                letter-spacing: -0.02em;
                margin-right: 16px;
                white-space: nowrap;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .nav-brand .badge {
                background: var(--accent-green);
                color: #fff;
                font-size: 0.7rem;
                padding: 2px 7px;
                border-radius: 20px;
                font-weight: 600;
                letter-spacing: 0.04em;
            }

            .nav-links {
                display: flex;
                align-items: center;
                gap: 2px;
                overflow-x: auto;
                flex: 1;
                scrollbar-width: none;
            }
            .nav-links::-webkit-scrollbar {
                display: none;
            }

            .nav-links a {
                color: rgba(255, 255, 255, 0.8);
                text-decoration: none;
                padding: 6px 12px;
                border-radius: 6px;
                font-size: 0.875rem;
                font-weight: 500;
                white-space: nowrap;
                transition: all 0.2s;
            }
            .nav-links a:hover {
                color: #fff;
                background: rgba(255, 255, 255, 0.12);
            }

            /* ── SECTIONS ── */
            section {
                padding: 80px 24px;
                max-width: 1200px;
                margin: 0 auto;
            }

            .section-label {
                display: inline-block;
                font-size: 0.75rem;
                font-weight: 700;
                letter-spacing: 0.1em;
                text-transform: uppercase;
                color: var(--accent-green);
                margin-bottom: 8px;
            }

            h2.section-title {
                font-size: clamp(1.75rem, 3vw, 2.5rem);
                font-weight: 800;
                color: var(--text-primary);
                letter-spacing: -0.03em;
                margin-bottom: 16px;
            }

            .section-desc {
                font-size: 1.05rem;
                color: var(--text-secondary);
                max-width: 680px;
                margin-bottom: 48px;
                line-height: 1.7;
            }

            /* ── HERO ── */
            #visao-geral {
                padding-top: 100px;
                padding-bottom: 80px;
                text-align: center;
            }

            .hero-eyebrow {
                font-size: 0.8rem;
                font-weight: 700;
                letter-spacing: 0.12em;
                text-transform: uppercase;
                color: var(--accent-green);
                margin-bottom: 16px;
                display: block;
            }

            .hero-title {
                font-size: clamp(2.2rem, 5vw, 4rem);
                font-weight: 900;
                letter-spacing: -0.04em;
                color: var(--text-primary);
                line-height: 1.1;
                margin-bottom: 20px;
            }

            .hero-title em {
                font-style: normal;
                color: var(--accent-green);
            }

            .hero-subtitle {
                font-size: 1.1rem;
                color: var(--text-secondary);
                max-width: 600px;
                margin: 0 auto 48px;
                line-height: 1.7;
            }

            .hero-counter-wrap {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-bottom: 56px;
            }

            .hero-counter-label {
                font-size: 0.85rem;
                font-weight: 600;
                letter-spacing: 0.06em;
                text-transform: uppercase;
                color: var(--text-secondary);
                margin-bottom: 8px;
            }

            .hero-counter {
                font-size: clamp(4rem, 10vw, 7rem);
                font-weight: 900;
                letter-spacing: -0.05em;
                color: var(--accent-green);
                line-height: 1;
                font-variant-numeric: tabular-nums;
                transition: color 0.3s;
            }

            .hero-counter-sub {
                font-size: 0.9rem;
                color: var(--text-muted);
                margin-top: 6px;
            }

            /* KPI grid */
            .kpi-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
                max-width: 900px;
                margin: 0 auto 40px;
            }

            .kpi-card {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 24px 20px;
                text-align: left;
                transition:
                    transform 0.2s,
                    box-shadow 0.2s;
                box-shadow: var(--shadow-sm);
            }

            .kpi-card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow-lg);
            }

            .kpi-card.output-card {
                border-top: 3px solid var(--primary);
            }
            .kpi-card.session-card {
                border-top: 3px solid var(--accent-amber);
            }

            .kpi-row-label {
                font-size: 0.72rem;
                font-weight: 700;
                letter-spacing: 0.1em;
                text-transform: uppercase;
                margin-bottom: 16px;
                padding: 4px 10px;
                border-radius: 20px;
                display: inline-block;
            }

            .kpi-row-label.output {
                background: rgba(30, 58, 95, 0.1);
                color: var(--primary);
            }
            .kpi-row-label.session {
                background: rgba(245, 158, 11, 0.1);
                color: var(--accent-amber);
            }

            .kpi-icon {
                font-size: 1.5rem;
                margin-bottom: 8px;
                display: block;
            }

            .kpi-value {
                font-size: 1.9rem;
                font-weight: 800;
                letter-spacing: -0.03em;
                color: var(--text-primary);
                line-height: 1;
                margin-bottom: 4px;
            }

            .kpi-title {
                font-size: 0.8rem;
                font-weight: 600;
                color: var(--text-secondary);
                text-transform: uppercase;
                letter-spacing: 0.04em;
            }

            .hero-intro {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 28px 32px;
                max-width: 820px;
                margin: 0 auto;
                text-align: left;
                box-shadow: var(--shadow-sm);
            }

            .hero-intro h3 {
                font-size: 1rem;
                font-weight: 700;
                margin-bottom: 12px;
                color: var(--text-primary);
            }

            .hero-intro p {
                font-size: 0.95rem;
                color: var(--text-secondary);
                line-height: 1.75;
            }

            .hero-intro p + p {
                margin-top: 10px;
            }

            /* ── CHARTS ── */
            #resultados {
                background: var(--bg);
            }

            .charts-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
                margin-top: 8px;
            }

            .chart-card {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 28px;
                box-shadow: var(--shadow-sm);
                transition: box-shadow 0.2s;
            }

            .chart-card:hover {
                box-shadow: var(--shadow-md);
            }
            .chart-card.full-width {
                grid-column: 1 / -1;
            }

            .chart-title {
                font-size: 0.95rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 4px;
            }

            .chart-subtitle {
                font-size: 0.8rem;
                color: var(--text-muted);
                margin-bottom: 20px;
            }

            svg.chart {
                width: 100%;
                overflow: visible;
            }

            .axis-label {
                font-family: var(--font);
                font-size: 11px;
                fill: var(--text-muted);
            }
            .axis-line {
                stroke: var(--border);
                stroke-width: 1;
            }
            .grid-line {
                stroke: var(--border);
                stroke-width: 1;
                stroke-dasharray: 4, 4;
            }

            .bar-animated {
                transform-origin: bottom;
                transform: scaleY(0);
                transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            }

            .bar-animated.visible {
                transform: scaleY(1);
            }

            .h-bar-animated {
                transform-origin: left;
                transform: scaleX(0);
                transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            }
            .h-bar-animated.visible {
                transform: scaleX(1);
            }

            .chart-legend {
                display: flex;
                flex-wrap: wrap;
                gap: 12px;
                margin-top: 16px;
            }

            .legend-item {
                display: flex;
                align-items: center;
                gap: 6px;
                font-size: 0.78rem;
                color: var(--text-secondary);
                font-weight: 500;
            }

            .legend-dot {
                width: 10px;
                height: 10px;
                border-radius: 50%;
                flex-shrink: 0;
            }

            /* ── CASE STUDIES ── */
            .case-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
                margin-bottom: 32px;
            }

            .case-card {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                overflow: hidden;
                box-shadow: var(--shadow-sm);
                transition: box-shadow 0.2s;
            }

            .case-card:hover {
                box-shadow: var(--shadow-md);
            }

            .case-header {
                padding: 20px 24px 16px;
                border-bottom: 1px solid var(--border);
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                gap: 12px;
            }

            .case-number {
                font-size: 0.72rem;
                font-weight: 700;
                letter-spacing: 0.08em;
                text-transform: uppercase;
                color: var(--text-muted);
                margin-bottom: 4px;
            }

            .case-title {
                font-size: 1.05rem;
                font-weight: 700;
                color: var(--text-primary);
                line-height: 1.3;
            }

            .case-category-badge {
                padding: 4px 10px;
                border-radius: 20px;
                font-size: 0.72rem;
                font-weight: 700;
                letter-spacing: 0.04em;
                text-transform: uppercase;
                white-space: nowrap;
                flex-shrink: 0;
            }

            .badge-refactor {
                background: rgba(59, 130, 246, 0.12);
                color: #3b82f6;
            }
            .badge-fix {
                background: rgba(34, 197, 94, 0.12);
                color: #22c55e;
            }

            .case-comparison {
                display: grid;
                grid-template-columns: 1fr 1fr;
            }

            .case-col {
                padding: 20px 24px;
            }

            .case-col + .case-col {
                border-left: 1px solid var(--border);
            }

            .case-col-label {
                font-size: 0.72rem;
                font-weight: 700;
                letter-spacing: 0.1em;
                text-transform: uppercase;
                margin-bottom: 12px;
                padding: 3px 10px;
                border-radius: 20px;
                display: inline-block;
            }

            .label-traditional {
                background: rgba(239, 68, 68, 0.1);
                color: #ef4444;
            }
            .label-aicheck {
                background: rgba(34, 197, 94, 0.12);
                color: #22c55e;
            }

            .metric-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 6px 0;
                border-bottom: 1px solid var(--border-light);
                font-size: 0.85rem;
            }

            .metric-row:last-child {
                border-bottom: none;
            }

            .metric-label {
                color: var(--text-secondary);
            }
            .metric-value {
                font-weight: 700;
                color: var(--text-primary);
                font-variant-numeric: tabular-nums;
            }
            .metric-value.better {
                color: var(--accent-green);
            }
            .metric-value.worse {
                color: var(--accent-red);
            }

            .case-savings-bar {
                padding: 16px 24px;
                border-top: 1px solid var(--border);
                background: var(--bg-card2);
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 12px;
                flex-wrap: wrap;
            }

            .saving-chip {
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .saving-chip-val {
                font-size: 1.2rem;
                font-weight: 800;
                color: var(--accent-green);
                letter-spacing: -0.02em;
            }

            .saving-chip-label {
                font-size: 0.7rem;
                color: var(--text-muted);
                text-align: center;
            }

            .case-expand-btn {
                background: none;
                border: 1px solid var(--border);
                border-radius: var(--radius-sm);
                padding: 6px 14px;
                cursor: pointer;
                font-size: 0.82rem;
                font-weight: 600;
                color: var(--text-secondary);
                transition: all 0.2s;
                display: flex;
                align-items: center;
                gap: 6px;
            }

            .case-expand-btn:hover {
                background: var(--primary);
                color: #fff;
                border-color: var(--primary);
            }

            .case-expand-content {
                display: none;
                padding: 0 24px 24px;
                border-top: 1px solid var(--border);
                background: var(--bg-card2);
            }

            .case-expand-content.open {
                display: block;
            }

            .expand-section {
                margin-top: 20px;
            }

            .expand-section h4 {
                font-size: 0.8rem;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.08em;
                color: var(--text-secondary);
                margin-bottom: 10px;
            }

            .cmd-list {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }

            .cmd-chip {
                display: inline-block;
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 6px;
                padding: 4px 10px;
                font-family: var(--mono);
                font-size: 0.78rem;
                color: var(--text-primary);
                word-break: break-all;
            }

            .files-list {
                display: flex;
                flex-direction: column;
                gap: 3px;
            }

            .file-item {
                font-family: var(--mono);
                font-size: 0.78rem;
                color: var(--text-secondary);
                padding: 2px 0;
            }

            .insights-list {
                list-style: none;
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .insights-list li {
                font-size: 0.88rem;
                color: var(--text-secondary);
                padding-left: 18px;
                position: relative;
                line-height: 1.5;
            }

            .insights-list li::before {
                content: "•";
                position: absolute;
                left: 0;
                color: var(--accent-green);
                font-weight: 700;
            }

            .case-aggregate {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 28px 32px;
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 24px;
                text-align: center;
                box-shadow: var(--shadow-sm);
            }

            .agg-val {
                font-size: 2rem;
                font-weight: 800;
                letter-spacing: -0.03em;
                color: var(--accent-green);
            }

            .agg-label {
                font-size: 0.78rem;
                color: var(--text-secondary);
                margin-top: 4px;
                font-weight: 500;
            }

            /* ── BENCHMARK CARDS ── */
            .filter-bar {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 28px;
                flex-wrap: wrap;
            }

            .filter-btn {
                padding: 6px 16px;
                border-radius: 20px;
                border: 1.5px solid var(--border);
                background: var(--bg-card);
                font-size: 0.82rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s;
                color: var(--text-secondary);
            }

            .filter-btn:hover,
            .filter-btn.active {
                border-color: var(--primary);
                color: var(--primary);
                background: rgba(30, 58, 95, 0.08);
            }

            .filter-btn[data-cat="lint-only"].active {
                border-color: var(--cat-lint-only);
                color: var(--cat-lint-only);
                background: rgba(34, 197, 94, 0.08);
            }
            .filter-btn[data-cat="ts-only"].active {
                border-color: var(--cat-ts-only);
                color: var(--cat-ts-only);
                background: rgba(139, 92, 246, 0.08);
            }
            .filter-btn[data-cat="mixed"].active {
                border-color: var(--cat-mixed);
                color: var(--cat-mixed);
                background: rgba(59, 130, 246, 0.08);
            }
            .filter-btn[data-cat="lint-heavy"].active {
                border-color: var(--cat-lint-heavy);
                color: var(--cat-lint-heavy);
                background: rgba(249, 115, 22, 0.08);
            }
            .filter-btn[data-cat="ts-heavy"].active {
                border-color: var(--cat-ts-heavy);
                color: var(--cat-ts-heavy);
                background: rgba(239, 68, 68, 0.08);
            }

            .sort-select {
                margin-left: auto;
                padding: 6px 12px;
                border-radius: var(--radius-sm);
                border: 1.5px solid var(--border);
                background: var(--bg-card);
                color: var(--text-primary);
                font-size: 0.82rem;
                font-family: var(--font);
                cursor: pointer;
            }

            .bench-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }

            .bench-card {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 20px;
                cursor: pointer;
                transition:
                    transform 0.2s,
                    box-shadow 0.2s;
                box-shadow: var(--shadow-sm);
                position: relative;
                overflow: hidden;
            }

            .bench-card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow-lg);
            }

            .bench-card::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
            }

            .bench-card[data-cat="lint-only"]::before {
                background: var(--cat-lint-only);
            }
            .bench-card[data-cat="ts-only"]::before {
                background: var(--cat-ts-only);
            }
            .bench-card[data-cat="mixed"]::before {
                background: var(--cat-mixed);
            }
            .bench-card[data-cat="lint-heavy"]::before {
                background: var(--cat-lint-heavy);
            }
            .bench-card[data-cat="ts-heavy"]::before {
                background: var(--cat-ts-heavy);
            }

            .bench-card-top {
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                margin-bottom: 12px;
            }

            .bench-cat-badge {
                font-size: 0.68rem;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.06em;
                padding: 3px 8px;
                border-radius: 10px;
            }

            .bench-cat-badge[data-cat="lint-only"] {
                background: rgba(34, 197, 94, 0.12);
                color: var(--cat-lint-only);
            }
            .bench-cat-badge[data-cat="ts-only"] {
                background: rgba(139, 92, 246, 0.12);
                color: var(--cat-ts-only);
            }
            .bench-cat-badge[data-cat="mixed"] {
                background: rgba(59, 130, 246, 0.12);
                color: var(--cat-mixed);
            }
            .bench-cat-badge[data-cat="lint-heavy"] {
                background: rgba(249, 115, 22, 0.12);
                color: var(--cat-lint-heavy);
            }
            .bench-cat-badge[data-cat="ts-heavy"] {
                background: rgba(239, 68, 68, 0.12);
                color: var(--cat-ts-heavy);
            }

            .bench-label {
                font-size: 0.92rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 4px;
            }

            .bench-errs {
                font-size: 0.78rem;
                color: var(--text-muted);
                margin-bottom: 16px;
            }

            .bench-donut-wrap {
                display: flex;
                align-items: center;
                gap: 16px;
                margin-bottom: 16px;
            }

            .bench-donut-svg {
                flex-shrink: 0;
            }

            .bench-stats {
                flex: 1;
                display: flex;
                flex-direction: column;
                gap: 6px;
            }

            .bench-stat {
                display: flex;
                justify-content: space-between;
                font-size: 0.8rem;
            }

            .bench-stat-label {
                color: var(--text-muted);
            }
            .bench-stat-val {
                font-weight: 700;
                color: var(--text-primary);
                font-variant-numeric: tabular-nums;
            }

            .bench-footer {
                padding-top: 12px;
                border-top: 1px solid var(--border-light);
                font-size: 0.75rem;
                color: var(--text-muted);
                font-family: var(--mono);
            }

            /* ── MODAL ── */
            .modal-overlay {
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 2000;
                display: none;
                align-items: center;
                justify-content: center;
                padding: 24px;
                backdrop-filter: blur(4px);
            }

            .modal-overlay.open {
                display: flex;
            }

            .modal-box {
                background: var(--bg-card);
                border-radius: var(--radius-lg);
                padding: 32px;
                max-width: 640px;
                width: 100%;
                max-height: 85vh;
                overflow-y: auto;
                box-shadow: var(--shadow-lg);
                position: relative;
            }

            .modal-close {
                position: absolute;
                top: 16px;
                right: 16px;
                background: var(--bg-card2);
                border: 1px solid var(--border);
                border-radius: 50%;
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 1rem;
                color: var(--text-secondary);
                transition: all 0.2s;
            }

            .modal-close:hover {
                background: var(--accent-red);
                color: #fff;
                border-color: var(--accent-red);
            }

            .modal-title {
                font-size: 1.2rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 4px;
                padding-right: 40px;
            }

            .modal-cat {
                font-size: 0.75rem;
                color: var(--text-muted);
                margin-bottom: 24px;
                font-variant-numeric: tabular-nums;
            }

            .modal-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
                margin-bottom: 24px;
            }

            .modal-stat-card {
                background: var(--bg-card2);
                border-radius: var(--radius-sm);
                padding: 14px 16px;
            }

            .modal-stat-label {
                font-size: 0.72rem;
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 0.06em;
                font-weight: 600;
                margin-bottom: 4px;
            }

            .modal-stat-val {
                font-size: 1.3rem;
                font-weight: 800;
                color: var(--text-primary);
                font-variant-numeric: tabular-nums;
            }

            .modal-stat-val.green {
                color: var(--accent-green);
            }

            .modal-code-section {
                margin-top: 20px;
            }
            .modal-code-label {
                font-size: 0.75rem;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.08em;
                color: var(--text-secondary);
                margin-bottom: 8px;
            }

            pre.code-block {
                background: var(--bg-card2);
                border: 1px solid var(--border);
                border-radius: var(--radius-sm);
                padding: 14px 16px;
                font-family: var(--mono);
                font-size: 0.8rem;
                color: var(--text-primary);
                overflow-x: auto;
                line-height: 1.6;
                white-space: pre-wrap;
                word-break: break-word;
            }

            /* ── BENEFITS ── */
            .benefits-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 24px;
            }

            .benefit-card {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 32px;
                transition:
                    transform 0.2s,
                    box-shadow 0.2s;
                box-shadow: var(--shadow-sm);
                position: relative;
                overflow: hidden;
            }

            .benefit-card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow-lg);
            }

            .benefit-icon {
                font-size: 2rem;
                margin-bottom: 16px;
                display: block;
            }

            .benefit-title {
                font-size: 1.15rem;
                font-weight: 800;
                color: var(--text-primary);
                margin-bottom: 12px;
                letter-spacing: -0.02em;
            }

            .benefit-desc {
                font-size: 0.9rem;
                color: var(--text-secondary);
                line-height: 1.7;
                margin-bottom: 20px;
            }

            .benefit-stats {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .benefit-stat-row {
                display: flex;
                align-items: center;
                gap: 10px;
                font-size: 0.85rem;
            }

            .benefit-stat-dot {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: var(--accent-green);
                flex-shrink: 0;
            }

            .benefit-stat-text {
                color: var(--text-secondary);
            }
            .benefit-stat-text strong {
                color: var(--text-primary);
                font-weight: 700;
            }

            /* ── METHODOLOGY ── */
            .collapsible-section {
                border: 1px solid var(--border);
                border-radius: var(--radius);
                overflow: hidden;
                margin-bottom: 16px;
                box-shadow: var(--shadow-sm);
            }

            .collapsible-header {
                padding: 18px 24px;
                background: var(--bg-card);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: space-between;
                transition: background 0.2s;
                user-select: none;
            }

            .collapsible-header:hover {
                background: var(--bg-card2);
            }

            .collapsible-header h3 {
                font-size: 0.98rem;
                font-weight: 700;
                color: var(--text-primary);
            }

            .collapsible-arrow {
                font-size: 0.75rem;
                color: var(--text-muted);
                transition: transform 0.3s;
            }

            .collapsible-section.open .collapsible-arrow {
                transform: rotate(180deg);
            }

            .collapsible-body {
                display: none;
                padding: 24px;
                background: var(--bg-card);
                border-top: 1px solid var(--border);
            }

            .collapsible-section.open .collapsible-body {
                display: block;
            }

            .matrix-table {
                width: 100%;
                border-collapse: collapse;
                font-size: 0.85rem;
                margin-top: 8px;
            }

            .matrix-table th {
                text-align: left;
                padding: 10px 14px;
                background: var(--bg-card2);
                color: var(--text-secondary);
                font-size: 0.72rem;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.06em;
                border-bottom: 1px solid var(--border);
            }

            .matrix-table td {
                padding: 10px 14px;
                border-bottom: 1px solid var(--border-light);
                color: var(--text-primary);
                font-variant-numeric: tabular-nums;
            }

            .matrix-table tr:last-child td {
                border-bottom: none;
            }

            .matrix-table tr:hover td {
                background: var(--bg-card2);
            }

            .matrix-table td.mono {
                font-family: var(--mono);
                font-size: 0.78rem;
            }

            .method-summary {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: var(--radius);
                padding: 28px 32px;
                margin-bottom: 32px;
                box-shadow: var(--shadow-sm);
            }

            .method-summary p {
                font-size: 0.95rem;
                color: var(--text-secondary);
                line-height: 1.75;
            }

            .method-summary p + p {
                margin-top: 12px;
            }

            /* ── BEFORE/AFTER ── */
            .format-comparison {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 16px;
                margin-top: 16px;
            }

            .format-side {
            }

            .format-label {
                font-size: 0.72rem;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.08em;
                margin-bottom: 8px;
                padding: 3px 10px;
                border-radius: 20px;
                display: inline-block;
            }

            .format-before-label {
                background: rgba(239, 68, 68, 0.1);
                color: #ef4444;
            }
            .format-after-label {
                background: rgba(34, 197, 94, 0.12);
                color: var(--accent-green);
            }

            /* ── FOOTER ── */
            footer {
                background: var(--primary);
                color: rgba(255, 255, 255, 0.7);
                text-align: center;
                padding: 40px 24px;
                font-size: 0.82rem;
                line-height: 1.8;
            }

            footer strong {
                color: #fff;
            }

            footer .footer-mono {
                font-family: var(--mono);
                font-size: 0.75rem;
                color: rgba(255, 255, 255, 0.5);
                margin-top: 8px;
            }

            /* ── DIVIDER ── */
            .section-divider {
                height: 1px;
                background: var(--border);
                max-width: 1200px;
                margin: 0 auto;
            }

            /* ── UTILITIES ── */
            .tag {
                display: inline-block;
                padding: 2px 8px;
                border-radius: 10px;
                font-size: 0.7rem;
                font-weight: 700;
                letter-spacing: 0.04em;
            }

            .text-green {
                color: var(--accent-green);
            }
            .text-amber {
                color: var(--accent-amber);
            }
            .text-red {
                color: var(--accent-red);
            }

            /* ── RESPONSIVE ── */
            @media (max-width: 1023px) {
                .charts-grid {
                    grid-template-columns: 1fr;
                }
                .chart-card.full-width {
                    grid-column: 1;
                }
                .bench-grid {
                    grid-template-columns: repeat(2, 1fr);
                }
                .case-grid {
                    grid-template-columns: 1fr;
                }
                .case-aggregate {
                    grid-template-columns: repeat(2, 1fr);
                }
                .benefits-grid {
                    grid-template-columns: 1fr;
                }
                .kpi-grid {
                    grid-template-columns: repeat(3, 1fr);
                }
                .format-comparison {
                    grid-template-columns: 1fr;
                }
                .modal-grid {
                    grid-template-columns: 1fr 1fr;
                }
            }

            @media (max-width: 767px) {
                section {
                    padding: 56px 16px;
                }
                .kpi-grid {
                    grid-template-columns: 1fr 1fr;
                }
                .bench-grid {
                    grid-template-columns: 1fr;
                }
                .case-comparison {
                    grid-template-columns: 1fr;
                }
                .case-col + .case-col {
                    border-left: none;
                    border-top: 1px solid var(--border);
                }
                nav {
                    padding: 0 16px;
                }
                .nav-brand {
                    font-size: 0.85rem;
                }
                .case-aggregate {
                    grid-template-columns: repeat(2, 1fr);
                }
                .modal-grid {
                    grid-template-columns: 1fr;
                }
                .hero-counter {
                    font-size: 4.5rem;
                }
            }

            @media (max-width: 480px) {
                .kpi-grid {
                    grid-template-columns: 1fr;
                }
            }

            /* ── AREA CHART PATH ── */
            .area-path {
                opacity: 0;
                transition: opacity 0.8s ease;
            }
            .area-path.visible {
                opacity: 1;
            }

            .line-path {
                stroke-dasharray: 1000;
                stroke-dashoffset: 1000;
                transition: stroke-dashoffset 1.2s ease;
            }
            .line-path.visible {
                stroke-dashoffset: 0;
            }
        </style>
    </head>
    <body>
        <!-- NAV -->
        <nav>
            <div class="nav-brand">
                ai:check
                <span class="badge">BENCHMARK</span>
            </div>
            <div class="nav-links">
                <a href="#visao-geral">Visao Geral</a>
                <a href="#resultados">Resultados</a>
                <a href="#casos-reais">Casos Reais</a>
                <a href="#benchmarks">Benchmarks</a>
                <a href="#beneficios">Por que ai:check?</a>
                <a href="#metodologia">Metodologia</a>
            </div>
        </nav>

        <!-- HERO -->
        <section id="visao-geral">
            <span class="hero-eyebrow"
                >Relatorio de Benchmark — 2026-02-25</span
            >
            <h1 class="hero-title">
                Eficiencia de Tokens:<br /><em>ai:check em Acao</em>
            </h1>
            <p class="hero-subtitle">
                Um unico comando unificado (<code
                    style="
                        font-family: var(--mono);
                        background: var(--bg-card2);
                        padding: 2px 6px;
                        border-radius: 4px;
                        font-size: 0.9em;
                    "
                    >npm run ai:check</code
                >) substitui dois comandos separados de lint e typecheck,
                reduzindo drasticamente o consumo de tokens em sessoes de IA.
            </p>

            <div class="hero-counter-wrap">
                <div class="hero-counter-label">
                    Reducao Media Ponderada de Tokens (Output)
                </div>
                <div class="hero-counter" id="hero-counter">0%</div>
                <div class="hero-counter-sub">
                    Media ponderada por volume de erros — 11 cenarios testados
                </div>
            </div>

            <div class="kpi-grid">
                <!-- Row 1: Output -->
                <div class="kpi-card output-card">
                    <span class="kpi-row-label output">Output</span>
                    <div class="kpi-value">9.204</div>
                    <div class="kpi-title">Tokens de Output Economizados</div>
                </div>
                <div class="kpi-card output-card">
                    <span class="kpi-row-label output">Output</span>
                    <div class="kpi-value">90,3%</div>
                    <div class="kpi-title">Pico de Economia</div>
                </div>
                <div class="kpi-card output-card">
                    <span class="kpi-row-label output">Output</span>
                    <div class="kpi-value">11</div>
                    <div class="kpi-title">Cenarios Testados</div>
                </div>
                <!-- Row 2: Session -->
                <div class="kpi-card session-card">
                    <span class="kpi-row-label session">Sessao Real</span>
                    <div class="kpi-value">43,3%</div>
                    <div class="kpi-title">Economia Media de Sessao</div>
                </div>
                <div class="kpi-card session-card">
                    <span class="kpi-row-label session">Sessao Real</span>
                    <div class="kpi-value">61.367</div>
                    <div class="kpi-title">Tokens de Sessao Economizados</div>
                </div>
                <div class="kpi-card session-card">
                    <span class="kpi-row-label session">Sessao Real</span>
                    <div class="kpi-value">2</div>
                    <div class="kpi-title">Casos Reais Analisados</div>
                </div>
            </div>

            <div class="hero-intro">
                <h3>Dois niveis de evidencia</h3>
                <p>
                    Os <strong>benchmarks de output</strong> medem tokens brutos
                    gerados pela ferramenta de validacao (lint + typecheck). O
                    cenario mais extremo (Misto: 50+50 erros) mostrou
                    <strong>90,3% de reducao</strong> — de 4.125 para apenas 400
                    tokens. A media ponderada por volume foi de
                    <strong>74,6%</strong>.
                </p>
                <p>
                    Os <strong>casos reais de sessao</strong> medem o impacto
                    total em sessoes completas do agente de IA, incluindo
                    leitura de arquivos, edicao e multiplos ciclos de validacao.
                    Em 2 casos reais, economizamos em media
                    <strong>43,3% dos tokens totais de sessao</strong> —
                    equivalendo a 61.367 tokens preservados.
                </p>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- CHARTS -->
        <section id="resultados">
            <span class="section-label">Resultados Detalhados</span>
            <h2 class="section-title">Analise Comparativa</h2>
            <p class="section-desc">
                Visualizacoes interativas dos 11 cenarios de benchmark,
                mostrando reducao de tokens, escalonamento por volume de erros e
                comparacao entre abordagens.
            </p>

            <div class="charts-grid">
                <!-- B1: Bar chart - economia por cenario -->
                <div class="chart-card full-width">
                    <div class="chart-title">B1 — Economia por Cenario (%)</div>
                    <div class="chart-subtitle">
                        Reducao percentual de tokens: comando normal vs
                        ai:check, por categoria
                    </div>
                    <svg
                        class="chart"
                        id="chart-b1"
                        viewBox="0 0 900 300"
                    ></svg>
                    <div class="chart-legend" id="legend-b1"></div>
                </div>

                <!-- B2: Line/area chart - mixed only -->
                <div class="chart-card">
                    <div class="chart-title">
                        B2 — Escalabilidade: Misto (Erros vs Economia)
                    </div>
                    <div class="chart-subtitle">
                        Tendencia de reducao conforme o numero de erros cresce
                        (apenas cenarios mistos)
                    </div>
                    <svg
                        class="chart"
                        id="chart-b2"
                        viewBox="0 0 440 260"
                    ></svg>
                </div>

                <!-- B4: Horizontal bar - category averages -->
                <div class="chart-card">
                    <div class="chart-title">
                        B4 — Media de Economia por Categoria (%)
                    </div>
                    <div class="chart-subtitle">
                        Desempenho medio do ai:check por tipo de erro
                    </div>
                    <svg
                        class="chart"
                        id="chart-b4"
                        viewBox="0 0 440 260"
                    ></svg>
                </div>

                <!-- B3: Grouped bar - normal vs compact -->
                <div class="chart-card full-width">
                    <div class="chart-title">
                        B3 — Normal vs Compacto: Tokens por Cenario
                    </div>
                    <div class="chart-subtitle">
                        Comparacao direta dos tokens gerados — metodo
                        tradicional vs ai:check
                    </div>
                    <svg
                        class="chart"
                        id="chart-b3"
                        viewBox="0 0 900 280"
                    ></svg>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div
                                class="legend-dot"
                                style="background: #64748b"
                            ></div>
                            Tradicional (normal)
                        </div>
                        <div class="legend-item">
                            <div
                                class="legend-dot"
                                style="background: #22c55e"
                            ></div>
                            ai:check (compacto)
                        </div>
                    </div>
                </div>

                <!-- B5: Session comparison -->
                <div class="chart-card full-width">
                    <div class="chart-title">
                        B5 — Tokens de Sessao: ai:check vs Tradicional
                    </div>
                    <div class="chart-subtitle">
                        Comparacao de tokens totais de sessao nos 2 casos reais
                        analisados
                    </div>
                    <svg
                        class="chart"
                        id="chart-b5"
                        viewBox="0 0 900 200"
                    ></svg>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div
                                class="legend-dot"
                                style="background: #64748b"
                            ></div>
                            Tradicional
                        </div>
                        <div class="legend-item">
                            <div
                                class="legend-dot"
                                style="background: #22c55e"
                            ></div>
                            ai:check
                        </div>
                        <div class="legend-item">
                            <div
                                class="legend-dot"
                                style="background: rgba(34, 197, 94, 0.25)"
                            ></div>
                            Economia
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- CASE STUDIES -->
        <section id="casos-reais">
            <span class="section-label">Casos Reais</span>
            <h2 class="section-title">Sessoes Reais do Agente</h2>
            <p class="section-desc">
                Comparacao de sessoes completas do agente de IA resolvendo as
                mesmas tarefas com e sem ai:check. Estes dados refletem o
                impacto real no consumo de tokens, tempo e ciclos de iteracao.
            </p>

            <div class="case-grid">
                <!-- Case 1 -->
                <div class="case-card">
                    <div class="case-header">
                        <div>
                            <div class="case-number">Caso 01</div>
                            <div class="case-title">
                                Refatoracao do Componente Checkbox
                            </div>
                        </div>
                        <span class="case-category-badge badge-refactor"
                            >Refactor</span
                        >
                    </div>

                    <div class="case-comparison">
                        <div class="case-col">
                            <span class="case-col-label label-traditional"
                                >Tradicional</span
                            >
                            <div class="metric-row">
                                <span class="metric-label">Tokens Totais</span
                                ><span class="metric-value worse">60.071</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Duracao</span
                                ><span class="metric-value worse">22m 59s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Chamadas de Ferramenta</span
                                ><span class="metric-value">34</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Iteracoes</span
                                ><span class="metric-value">4</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Comandos de Validacao</span
                                ><span class="metric-value">2</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Arquivos Modificados</span
                                ><span class="metric-value">12</span>
                            </div>
                        </div>
                        <div class="case-col">
                            <span class="case-col-label label-aicheck"
                                >ai:check</span
                            >
                            <div class="metric-row">
                                <span class="metric-label">Tokens Totais</span
                                ><span class="metric-value better">49.492</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Duracao</span
                                ><span class="metric-value better">5m 38s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Chamadas de Ferramenta</span
                                ><span class="metric-value">36</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Iteracoes</span
                                ><span class="metric-value">3</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Comandos de Validacao</span
                                ><span class="metric-value better">1</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Arquivos Modificados</span
                                ><span class="metric-value">13</span>
                            </div>
                        </div>
                    </div>

                    <div class="case-savings-bar">
                        <div class="saving-chip">
                            <div class="saving-chip-val">17,6%</div>
                            <div class="saving-chip-label">
                                Reducao de Tokens
                            </div>
                        </div>
                        <div class="saving-chip">
                            <div class="saving-chip-val">10.579</div>
                            <div class="saving-chip-label">
                                Tokens Economizados
                            </div>
                        </div>
                        <div class="saving-chip">
                            <div class="saving-chip-val">17m 21s</div>
                            <div class="saving-chip-label">
                                Tempo Economizado
                            </div>
                        </div>
                        <div class="saving-chip">
                            <div class="saving-chip-val">-1</div>
                            <div class="saving-chip-label">
                                Iteracao a Menos
                            </div>
                        </div>
                        <button
                            class="case-expand-btn"
                            onclick="toggleCase('case1-expand', this)"
                        >
                            Detalhes <span>+</span>
                        </button>
                    </div>

                    <div class="case-expand-content" id="case1-expand">
                        <div class="expand-section">
                            <h4>Prompt</h4>
                            <pre class="code-block">
The Checkbox component at src/components/Checkbox/Checkbox.tsx was built
with a non-standard API that doesn't align with form conventions.
It needs to be updated to follow standard controlled-input pattern</pre
                            >
                        </div>
                        <div
                            style="
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                                gap: 16px;
                                margin-top: 20px;
                            "
                        >
                            <div class="expand-section">
                                <h4>Comandos — Tradicional</h4>
                                <div class="cmd-list">
                                    <code class="cmd-chip"
                                        >npm run type:check</code
                                    >
                                    <code class="cmd-chip"
                                        >npm run lint:check</code
                                    >
                                </div>
                            </div>
                            <div class="expand-section">
                                <h4>Comando — ai:check</h4>
                                <div class="cmd-list">
                                    <code class="cmd-chip"
                                        >npm run ai:check</code
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="expand-section">
                            <h4>Insights Chave</h4>
                            <ul class="insights-list">
                                <li>
                                    A extensao de SwitchProps causou conflito de
                                    tipos, exigindo remocao da heranca e
                                    redefinicao explicita das props
                                </li>
                                <li>
                                    Erros de prettier e TypeScript foram
                                    revelados progressivamente e corrigidos em 2
                                    rodadas de validacao
                                </li>
                                <li>
                                    Um unico comando de validacao (npm run
                                    ai:check) foi usado durante toda a sessao
                                </li>
                                <li>
                                    Sessao com ai:check durou 5m38s vs 22m59s
                                    com abordagem tradicional — 4x mais rapida
                                </li>
                            </ul>
                        </div>
                        <div class="expand-section">
                            <h4>Arquivos Modificados (ai:check)</h4>
                            <div class="files-list">
                                <span class="file-item"
                                    >src/components/Checkbox/Checkbox.tsx</span
                                >
                                <span class="file-item"
                                    >src/components/ControlledCheckbox/types.ts</span
                                >
                                <span class="file-item"
                                    >src/components/ControlledCheckbox/index.tsx</span
                                >
                                <span class="file-item"
                                    >src/components/AddressForm/constants.ts</span
                                >
                                <span class="file-item"
                                    >src/components/AddressForm/types.ts</span
                                >
                                <span class="file-item"
                                    >src/components/AddressForm/AddressForm.tsx</span
                                >
                                <span class="file-item"
                                    >src/screens/PaymentsFlow/screens/resume/PreviewAdvancePayment.tsx</span
                                >
                                <span class="file-item"
                                    >src/screens/TrafficTicketsFlow/... (+ 6
                                    outros arquivos)</span
                                >
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Case 2 -->
                <div class="case-card">
                    <div class="case-header">
                        <div>
                            <div class="case-number">Caso 02</div>
                            <div class="case-title">
                                Validacao e Correcao de Erros TypeScript/Lint
                            </div>
                        </div>
                        <span class="case-category-badge badge-fix">Fix</span>
                    </div>

                    <div class="case-comparison">
                        <div class="case-col">
                            <span class="case-col-label label-traditional"
                                >Tradicional</span
                            >
                            <div class="metric-row">
                                <span class="metric-label">Tokens Totais</span
                                ><span class="metric-value worse">73.608</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Duracao</span
                                ><span class="metric-value worse">3m 25s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Chamadas de Ferramenta</span
                                ><span class="metric-value worse">22</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Iteracoes</span
                                ><span class="metric-value">3</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Variantes de Validacao</span
                                ><span class="metric-value worse">6</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Arquivos Modificados</span
                                ><span class="metric-value">2</span>
                            </div>
                        </div>
                        <div class="case-col">
                            <span class="case-col-label label-aicheck"
                                >ai:check</span
                            >
                            <div class="metric-row">
                                <span class="metric-label">Tokens Totais</span
                                ><span class="metric-value better">22.820</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Duracao</span
                                ><span class="metric-value better">1m 50s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Chamadas de Ferramenta</span
                                ><span class="metric-value better">8</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Iteracoes</span
                                ><span class="metric-value">3</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Variantes de Validacao</span
                                ><span class="metric-value better">1</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"
                                    >Arquivos Modificados</span
                                ><span class="metric-value">1</span>
                            </div>
                        </div>
                    </div>

                    <div class="case-savings-bar">
                        <div class="saving-chip">
                            <div class="saving-chip-val">69,0%</div>
                            <div class="saving-chip-label">
                                Reducao de Tokens
                            </div>
                        </div>
                        <div class="saving-chip">
                            <div class="saving-chip-val">50.788</div>
                            <div class="saving-chip-label">
                                Tokens Economizados
                            </div>
                        </div>
                        <div class="saving-chip">
                            <div class="saving-chip-val">1m 35s</div>
                            <div class="saving-chip-label">
                                Tempo Economizado
                            </div>
                        </div>
                        <div class="saving-chip">
                            <div class="saving-chip-val">-14</div>
                            <div class="saving-chip-label">
                                Chamadas a Menos
                            </div>
                        </div>
                        <button
                            class="case-expand-btn"
                            onclick="toggleCase('case2-expand', this)"
                        >
                            Detalhes <span>+</span>
                        </button>
                    </div>

                    <div class="case-expand-content" id="case2-expand">
                        <div class="expand-section">
                            <h4>Prompt</h4>
                            <pre class="code-block">
Validate the typescript and lint in this project and fix the issues</pre
                            >
                        </div>
                        <div
                            style="
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                                gap: 16px;
                                margin-top: 20px;
                            "
                        >
                            <div class="expand-section">
                                <h4>Comandos — Tradicional (6 variacoes)</h4>
                                <div class="cmd-list">
                                    <code class="cmd-chip"
                                        >npx tsc --noEmit 2>&1 | head -200</code
                                    >
                                    <code class="cmd-chip"
                                        >npx eslint src 2>&1 | head -200</code
                                    >
                                    <code class="cmd-chip"
                                        >npx eslint src 2>&1 | tail -200</code
                                    >
                                    <code class="cmd-chip"
                                        >npx eslint
                                        src/components/AddressForm/...</code
                                    >
                                    <code class="cmd-chip"
                                        >npx tsc --noEmit 2>&1</code
                                    >
                                    <code class="cmd-chip"
                                        >npx eslint src 2>&1 | grep -E</code
                                    >
                                </div>
                            </div>
                            <div class="expand-section">
                                <h4>Comando — ai:check</h4>
                                <div class="cmd-list">
                                    <code class="cmd-chip"
                                        >npm run ai:check</code
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="expand-section">
                            <h4>Insights Chave</h4>
                            <ul class="insights-list">
                                <li>
                                    Apenas 8 chamadas de ferramenta para
                                    completar a tarefa (vs 22 com abordagem
                                    tradicional — 2,75x mais chamadas)
                                </li>
                                <li>
                                    Dois ciclos de correcao: primeiro para o
                                    enum, segundo para formatacao Prettier
                                </li>
                                <li>
                                    Sessao extremamente concisa: 1m50s e apenas
                                    22.820 tokens (vs 73.608 — 3,2x mais tokens
                                    com abordagem tradicional)
                                </li>
                                <li>
                                    Abordagem tradicional usou 6 variacoes
                                    diferentes de comandos para tentar obter
                                    visao completa dos erros
                                </li>
                            </ul>
                        </div>
                        <div class="expand-section">
                            <h4>Arquivo Modificado (ai:check)</h4>
                            <div class="files-list">
                                <span class="file-item"
                                    >src/contexts/UseQualification/index.tsx</span
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aggregate stats -->
            <div class="case-aggregate">
                <div>
                    <div class="agg-val">43,3%</div>
                    <div class="agg-label">Reducao Media de Sessao</div>
                </div>
                <div>
                    <div class="agg-val">61.367</div>
                    <div class="agg-label">Tokens de Sessao Economizados</div>
                </div>
                <div>
                    <div class="agg-val">8</div>
                    <div class="agg-label">Media de Chamadas a Menos</div>
                </div>
                <div>
                    <div class="agg-val">4x</div>
                    <div class="agg-label">Mais Rapido (melhor caso)</div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- BENCHMARKS -->
        <section id="benchmarks">
            <span class="section-label">Benchmarks Detalhados</span>
            <h2 class="section-title">11 Cenarios de Teste</h2>
            <p class="section-desc">
                Clique em qualquer card para ver os detalhes completos do
                cenario. Use os filtros para navegar por categoria.
            </p>

            <div class="filter-bar">
                <button
                    class="filter-btn active"
                    data-cat="all"
                    onclick="filterBench('all')"
                >
                    Todos
                </button>
                <button
                    class="filter-btn"
                    data-cat="lint-only"
                    onclick="filterBench('lint-only')"
                >
                    Somente Lint
                </button>
                <button
                    class="filter-btn"
                    data-cat="ts-only"
                    onclick="filterBench('ts-only')"
                >
                    Somente TS
                </button>
                <button
                    class="filter-btn"
                    data-cat="mixed"
                    onclick="filterBench('mixed')"
                >
                    Misto
                </button>
                <button
                    class="filter-btn"
                    data-cat="lint-heavy"
                    onclick="filterBench('lint-heavy')"
                >
                    Lint Pesado
                </button>
                <button
                    class="filter-btn"
                    data-cat="ts-heavy"
                    onclick="filterBench('ts-heavy')"
                >
                    TS Pesado
                </button>
                <select class="sort-select" onchange="sortBench(this.value)">
                    <option value="default">Ordenar: Padrao</option>
                    <option value="reduction-desc">Maior Reducao</option>
                    <option value="reduction-asc">Menor Reducao</option>
                    <option value="errors-desc">Mais Erros</option>
                    <option value="tokens-desc">Mais Tokens</option>
                </select>
            </div>

            <div class="bench-grid" id="bench-grid"></div>
        </section>

        <!-- MODAL -->
        <div
            class="modal-overlay"
            id="modal-overlay"
            onclick="closeModal(event)"
        >
            <div class="modal-box" id="modal-box">
                <button class="modal-close" onclick="closeModal(null, true)">
                    x
                </button>
                <div id="modal-content"></div>
            </div>
        </div>

        <div class="section-divider"></div>

        <!-- BENEFITS -->
        <section id="beneficios">
            <span class="section-label">Por que ai:check?</span>
            <h2 class="section-title">Beneficios Comprovados</h2>
            <p class="section-desc">
                Numeros reais de benchmarks e casos reais demonstram o valor do
                comando unificado.
            </p>

            <div class="benefits-grid">
                <div class="benefit-card">
                    <span class="benefit-icon">&#128200;</span>
                    <div class="benefit-title">Reducao de Custos</div>
                    <div class="benefit-desc">
                        Menos tokens significa menor custo de API por ciclo de
                        desenvolvimento. A economia escala com o volume: quanto
                        mais erros, maior o beneficio.
                    </div>
                    <div class="benefit-stats">
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                <strong>$0,028 economizados</strong> por ciclo
                                de validacao (estimado)
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                <strong>74,6%</strong> menos tokens de output em
                                media ponderada
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                <strong>90,3%</strong> de reducao no cenario de
                                maior volume (100 erros)
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                <strong>43,3%</strong> de reducao em tokens
                                totais de sessao (casos reais)
                            </div>
                        </div>
                    </div>
                </div>

                <div class="benefit-card">
                    <span class="benefit-icon">&#9881;</span>
                    <div class="benefit-title">Execucao Deterministica</div>
                    <div class="benefit-desc">
                        Um unico ponto de entrada elimina a tentacao de usar
                        variantes (tsc, eslint, grep, head, tail) que dispersam
                        o contexto e geram mais tokens.
                    </div>
                    <div class="benefit-stats">
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                Caso 2 (tradicional):
                                <strong>6 variantes</strong> de comandos
                                diferentes usadas
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                Caso 2 (ai:check):
                                <strong>1 comando</strong> unico durante toda a
                                sessao
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                <strong>2,75x menos</strong> chamadas de
                                ferramenta no caso 2
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                Output estruturado reduz necessidade de parsing
                                adicional
                            </div>
                        </div>
                    </div>
                </div>

                <div class="benefit-card">
                    <span class="benefit-icon">&#128200;</span>
                    <div class="benefit-title">Escalabilidade</div>
                    <div class="benefit-desc">
                        A economia nao e linear — cresce com o volume de erros.
                        Para projetos grandes com muitos erros acumulados, o
                        beneficio e ainda maior.
                    </div>
                    <div class="benefit-stats">
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                1 erro: <strong>25,8%</strong> de economia
                                (menor beneficio)
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                10 erros: <strong>47,8%</strong> de economia
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                50 erros: <strong>56,2%</strong> de economia
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                100 erros: <strong>90,3%</strong> de economia —
                                4.125 vs 400 tokens
                            </div>
                        </div>
                    </div>
                </div>

                <div class="benefit-card">
                    <span class="benefit-icon">&#128203;</span>
                    <div class="benefit-title">Output Estruturado</div>
                    <div class="benefit-desc">
                        Formato prefixado (LINT/TS) permite que o agente
                        identifique erros instantaneamente, sem necessidade de
                        parsing de formatos verbosos diferentes.
                    </div>
                    <div class="benefit-stats">
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                Formato:
                                <strong
                                    >TIPO arquivo:linha regra mensagem</strong
                                >
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                Truncamento inteligente: mostra
                                <strong>15 erros por categoria</strong>
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                Contadores de resumo para guiar fluxo iterativo
                            </div>
                        </div>
                        <div class="benefit-stat-row">
                            <div class="benefit-stat-dot"></div>
                            <div class="benefit-stat-text">
                                Elimina necessidade de head/tail/grep por output
                                verboso
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- METHODOLOGY -->
        <section id="metodologia">
            <span class="section-label">Metodologia</span>
            <h2 class="section-title">Como os Dados foram Coletados</h2>

            <div class="method-summary">
                <p>
                    Este benchmark mede o impacto do comando
                    <code
                        style="
                            font-family: var(--mono);
                            background: var(--bg-card2);
                            padding: 1px 6px;
                            border-radius: 4px;
                        "
                        >npm run ai:check</code
                    >
                    em dois niveis: (1) tokens brutos de output gerados pelos
                    comandos de validacao, e (2) tokens totais consumidos em
                    sessoes completas do agente de IA.
                </p>
                <p>
                    Para os <strong>benchmarks de output</strong>, erros foram
                    injetados sinteticamente em arquivos do projeto real e os
                    outputs de ambas as abordagens foram contados usando o
                    tokenizador cl100k_base (GPT-4/Claude). Para os
                    <strong>casos reais</strong>, sessoes completas foram
                    executadas com o mesmo prompt e as mesmas condicoes
                    iniciais, alternando a abordagem de validacao.
                </p>
            </div>

            <div class="format-comparison" style="margin-bottom: 32px">
                <div class="format-side">
                    <span class="format-label format-before-label"
                        >Antes (Verboso)</span
                    >
                    <pre class="code-block">
/path/to/file.tsx
  42:5  error  'console' is not allowed  no-console
  43:8  warning  Missing return type
    @typescript-eslint/explicit-function-return-type

/path/to/other.ts
  12:3  error  Argument of type 'string' is not
    assignable to parameter of type 'number'.

x 3 problems (2 errors, 1 warning)</pre
                    >
                </div>
                <div class="format-side">
                    <span class="format-label format-after-label"
                        >Depois (ai:check)</span
                    >
                    <pre class="code-block">
LINT  src/file.tsx:42  no-console
      'console' is not allowed
LINT  src/file.tsx:43  explicit-function-return-type
      Missing return type
TS    src/other.ts:12  TS2345
      Argument of type 'string' is not assignable
      to parameter of type 'number'.

Summary: 2 LINT | 1 TS | 3 total</pre
                    >
                </div>
            </div>

            <div class="collapsible-section" id="coll-bench">
                <div
                    class="collapsible-header"
                    onclick="toggleCollapsible('coll-bench')"
                >
                    <h3>Detalhes Tecnicos: Benchmarks de Output</h3>
                    <span class="collapsible-arrow">v</span>
                </div>
                <div class="collapsible-body">
                    <p
                        style="
                            font-size: 0.88rem;
                            color: var(--text-secondary);
                            margin-bottom: 16px;
                            line-height: 1.7;
                        "
                    >
                        Cenarios foram construidos injetando erros sinteticos em
                        arquivos reais do repositorio. Os outputs foram
                        capturados e tokenizados. O comando normal executa
                        <code style="font-family: var(--mono)"
                            >npm run lint:check:quiet ; npm run type:check</code
                        >
                        em sequencia. O comando compacto executa
                        <code style="font-family: var(--mono)"
                            >npm run ai:check</code
                        >.
                    </p>
                    <table class="matrix-table">
                        <thead>
                            <tr>
                                <th>Cenario</th>
                                <th>Categoria</th>
                                <th>Total Erros</th>
                                <th>Tokens Normal</th>
                                <th>Tokens Compact.</th>
                                <th>Economia</th>
                                <th>Reducao</th>
                            </tr>
                        </thead>
                        <tbody id="bench-matrix-body"></tbody>
                    </table>
                </div>
            </div>

            <div class="collapsible-section" id="coll-cases">
                <div
                    class="collapsible-header"
                    onclick="toggleCollapsible('coll-cases')"
                >
                    <h3>Detalhes Tecnicos: Casos Reais</h3>
                    <span class="collapsible-arrow">v</span>
                </div>
                <div class="collapsible-body">
                    <p
                        style="
                            font-size: 0.88rem;
                            color: var(--text-secondary);
                            margin-bottom: 16px;
                            line-height: 1.7;
                        "
                    >
                        Dois casos reais foram executados com o agente Claude
                        Sonnet no repositorio px-mobile-motorista. Cada caso foi
                        executado duas vezes: uma com a abordagem tradicional
                        (comandos separados) e outra com ai:check. As sessoes
                        foram cronometradas e os tokens totais foram somados a
                        partir dos logs das sessoes.
                    </p>
                    <table class="matrix-table">
                        <thead>
                            <tr>
                                <th>Caso</th>
                                <th>Categoria</th>
                                <th>Tokens Tradicional</th>
                                <th>Tokens ai:check</th>
                                <th>Economia</th>
                                <th>Reducao %</th>
                                <th>Duracao Trad.</th>
                                <th>Duracao ai:c</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Refatoracao Checkbox</td>
                                <td>refactor</td>
                                <td>60.071</td>
                                <td>49.492</td>
                                <td class="text-green">10.579</td>
                                <td class="text-green">17,6%</td>
                                <td>22m 59s</td>
                                <td class="text-green">5m 38s</td>
                            </tr>
                            <tr>
                                <td>Validacao e Correcao TS/Lint</td>
                                <td>fix</td>
                                <td>73.608</td>
                                <td>22.820</td>
                                <td class="text-green">50.788</td>
                                <td class="text-green">69,0%</td>
                                <td>3m 25s</td>
                                <td class="text-green">1m 50s</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer>
            <div>
                <strong>Benchmark ai:check</strong> — Relatorio de Eficiencia de
                Tokens
            </div>
            <div>
                Branch: <strong>feat/ai-improvements</strong> &nbsp;|&nbsp;
                Commit: <strong>3ff53169b</strong> &nbsp;|&nbsp; Data:
                <strong>2026-02-25</strong>
            </div>
            <div class="footer-mono">
                Gerado automaticamente por benchmark-builder
            </div>
        </footer>

        <script>
            // ── DATA ──
            const benchmarks = [
                {
                    scenario: "lint-only-1",
                    scenarioLabel: "Somente Lint: 1",
                    date: "2026-02-25",
                    normalTokens: 82,
                    compactTokens: 40,
                    savedTokens: 42,
                    reductionPercent: 51.2,
                    normalChars: 323,
                    compactChars: 159,
                    filesChanged: 1,
                    totalErrors: 1,
                    tsErrors: 0,
                    lintErrors: 1,
                    category: "lint-only",
                    diffSummary: "1 file changed, 2 insertions(+)",
                },
                {
                    scenario: "ts-only-1",
                    scenarioLabel: "Somente TS: 1",
                    date: "2026-02-25",
                    normalTokens: 62,
                    compactTokens: 46,
                    savedTokens: 16,
                    reductionPercent: 25.8,
                    normalChars: 246,
                    compactChars: 180,
                    filesChanged: 1,
                    totalErrors: 1,
                    tsErrors: 1,
                    lintErrors: 0,
                    category: "ts-only",
                    diffSummary: "1 file changed, 3 insertions(+)",
                },
                {
                    scenario: "mixed-1",
                    scenarioLabel: "Misto: 1+1",
                    date: "2026-02-25",
                    normalTokens: 129,
                    compactTokens: 86,
                    savedTokens: 43,
                    reductionPercent: 33.3,
                    normalChars: 510,
                    compactChars: 340,
                    filesChanged: 2,
                    totalErrors: 2,
                    tsErrors: 1,
                    lintErrors: 1,
                    category: "mixed",
                    diffSummary: "2 files changed, 5 insertions(+)",
                },
                {
                    scenario: "mixed-3",
                    scenarioLabel: "Misto: 3+3",
                    date: "2026-02-25",
                    normalTokens: 295,
                    compactTokens: 154,
                    savedTokens: 141,
                    reductionPercent: 47.8,
                    normalChars: 1176,
                    compactChars: 612,
                    filesChanged: 6,
                    totalErrors: 6,
                    tsErrors: 3,
                    lintErrors: 3,
                    category: "mixed",
                    diffSummary: "6 files changed, 15 insertions(+)",
                },
                {
                    scenario: "mixed-5",
                    scenarioLabel: "Misto: 5+5",
                    date: "2026-02-25",
                    normalTokens: 425,
                    compactTokens: 186,
                    savedTokens: 239,
                    reductionPercent: 56.2,
                    normalChars: 1697,
                    compactChars: 741,
                    filesChanged: 10,
                    totalErrors: 10,
                    tsErrors: 5,
                    lintErrors: 5,
                    category: "mixed",
                    diffSummary: "10 files changed, 25 insertions(+)",
                },
                {
                    scenario: "mixed-10",
                    scenarioLabel: "Misto: 10+10",
                    date: "2026-02-25",
                    normalTokens: 872,
                    compactTokens: 388,
                    savedTokens: 484,
                    reductionPercent: 55.5,
                    normalChars: 3485,
                    compactChars: 1549,
                    filesChanged: 20,
                    totalErrors: 20,
                    tsErrors: 10,
                    lintErrors: 10,
                    category: "mixed",
                    diffSummary: "20 files changed, 50 insertions(+)",
                },
                {
                    scenario: "mixed-15",
                    scenarioLabel: "Misto: 15+15",
                    date: "2026-02-25",
                    normalTokens: 1330,
                    compactTokens: 601,
                    savedTokens: 729,
                    reductionPercent: 54.8,
                    normalChars: 5317,
                    compactChars: 2401,
                    filesChanged: 30,
                    totalErrors: 30,
                    tsErrors: 15,
                    lintErrors: 15,
                    category: "mixed",
                    diffSummary: "30 files changed, 75 insertions(+)",
                },
                {
                    scenario: "mixed-25",
                    scenarioLabel: "Misto: 25+25",
                    date: "2026-02-25",
                    normalTokens: 2145,
                    compactTokens: 584,
                    savedTokens: 1561,
                    reductionPercent: 72.8,
                    normalChars: 8575,
                    compactChars: 2335,
                    filesChanged: 50,
                    totalErrors: 50,
                    tsErrors: 25,
                    lintErrors: 25,
                    category: "mixed",
                    diffSummary: "50 files changed, 125 insertions(+)",
                },
                {
                    scenario: "mixed-50",
                    scenarioLabel: "Misto: 50+50",
                    date: "2026-02-25",
                    normalTokens: 4125,
                    compactTokens: 400,
                    savedTokens: 3725,
                    reductionPercent: 90.3,
                    normalChars: 16494,
                    compactChars: 1597,
                    filesChanged: 100,
                    totalErrors: 100,
                    tsErrors: 50,
                    lintErrors: 50,
                    category: "mixed",
                    diffSummary: "100 files changed, 250 insertions(+)",
                },
                {
                    scenario: "lint-heavy-30",
                    scenarioLabel: "Lint Pesado: 30",
                    date: "2026-02-25",
                    normalTokens: 1585,
                    compactTokens: 340,
                    savedTokens: 1245,
                    reductionPercent: 78.5,
                    normalChars: 6335,
                    compactChars: 1357,
                    filesChanged: 35,
                    totalErrors: 35,
                    tsErrors: 5,
                    lintErrors: 30,
                    category: "lint-heavy",
                    diffSummary: "35 files changed, 75 insertions(+)",
                },
                {
                    scenario: "ts-heavy-30",
                    scenarioLabel: "TS Pesado: 30",
                    date: "2026-02-25",
                    normalTokens: 1295,
                    compactTokens: 316,
                    savedTokens: 979,
                    reductionPercent: 75.6,
                    normalChars: 5177,
                    compactChars: 1260,
                    filesChanged: 35,
                    totalErrors: 35,
                    tsErrors: 30,
                    lintErrors: 5,
                    category: "ts-heavy",
                    diffSummary: "35 files changed, 100 insertions(+)",
                },
            ];

            const catColors = {
                "lint-only": "#22c55e",
                "ts-only": "#8b5cf6",
                mixed: "#3b82f6",
                "lint-heavy": "#f97316",
                "ts-heavy": "#ef4444",
            };

            const catLabels = {
                "lint-only": "Somente Lint",
                "ts-only": "Somente TS",
                mixed: "Misto",
                "lint-heavy": "Lint Pesado",
                "ts-heavy": "TS Pesado",
            };

            // ── HERO COUNTER ──
            let counterDone = false;
            function animateCounter() {
                if (counterDone) return;
                counterDone = true;
                const el = document.getElementById("hero-counter");
                const target = 74.6;
                const duration = 1800;
                const start = performance.now();
                function step(now) {
                    const p = Math.min((now - start) / duration, 1);
                    const ease = 1 - Math.pow(1 - p, 3);
                    const val = ease * target;
                    el.textContent = val.toFixed(1) + "%";
                    if (p < 1) requestAnimationFrame(step);
                    else el.textContent = "74.6%";
                }
                requestAnimationFrame(step);
            }

            // Trigger counter on load (hero is visible)
            window.addEventListener("load", () => {
                setTimeout(animateCounter, 300);
            });

            // ── INTERSECTION OBSERVER ──
            const io = new IntersectionObserver(
                (entries) => {
                    entries.forEach((e) => {
                        if (e.isIntersecting) {
                            e.target
                                .querySelectorAll(".bar-animated")
                                .forEach((b) => b.classList.add("visible"));
                            e.target
                                .querySelectorAll(".h-bar-animated")
                                .forEach((b) => b.classList.add("visible"));
                            e.target
                                .querySelectorAll(".area-path, .line-path")
                                .forEach((b) => b.classList.add("visible"));
                        }
                    });
                },
                { threshold: 0.15 },
            );

            // ── SVG UTILS ──
            function svgEl(tag, attrs) {
                const el = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    tag,
                );
                Object.entries(attrs || {}).forEach(([k, v]) =>
                    el.setAttribute(k, v),
                );
                return el;
            }

            function addText(svg, txt, x, y, attrs) {
                const el = svgEl("text", { x, y, ...attrs });
                el.textContent = txt;
                svg.appendChild(el);
                return el;
            }

            function addLine(svg, x1, y1, x2, y2, attrs) {
                const el = svgEl("line", { x1, y1, x2, y2, ...attrs });
                svg.appendChild(el);
                return el;
            }

            // ── CHART B1: Economia por cenario ──
            function buildB1() {
                const svg = document.getElementById("chart-b1");
                const W = 900,
                    H = 300;
                const ml = 40,
                    mr = 20,
                    mt = 20,
                    mb = 60;
                const cw = W - ml - mr,
                    ch = H - mt - mb;
                const n = benchmarks.length;
                const bw = cw / n;
                const pad = bw * 0.2;

                // Grid lines
                [0, 25, 50, 75, 100].forEach((v) => {
                    const y = mt + ch - (v / 100) * ch;
                    addLine(svg, ml, y, W - mr, y, { class: "grid-line" });
                    addText(svg, v + "%", ml - 6, y + 4, {
                        class: "axis-label",
                        "text-anchor": "end",
                    });
                });

                benchmarks.forEach((d, i) => {
                    const x = ml + i * bw + pad / 2;
                    const bwInner = bw - pad;
                    const bh = (d.reductionPercent / 100) * ch;
                    const y = mt + ch - bh;
                    const color = catColors[d.category];

                    const rect = svgEl("rect", {
                        x: x,
                        y: y,
                        width: bwInner,
                        height: bh,
                        fill: color,
                        rx: 3,
                        opacity: 0.9,
                        class: "bar-animated",
                        style: `transform-origin: ${x + bwInner / 2}px ${mt + ch}px`,
                    });
                    svg.appendChild(rect);

                    // Value label
                    const tEl = svgEl("text", {
                        x: x + bwInner / 2,
                        y: y - 4,
                        class: "axis-label",
                        "text-anchor": "middle",
                        fill: color,
                        style: "font-weight:700;font-size:10px",
                    });
                    tEl.textContent = d.reductionPercent + "%";
                    svg.appendChild(tEl);

                    // X label (rotated)
                    const g = svgEl("g", {
                        transform: `translate(${x + bwInner / 2}, ${mt + ch + 10}) rotate(-35)`,
                    });
                    const lbl = svgEl("text", {
                        class: "axis-label",
                        "text-anchor": "end",
                        "font-size": "9",
                    });
                    lbl.textContent = d.scenarioLabel;
                    g.appendChild(lbl);
                    svg.appendChild(g);
                });

                // Legend
                const legendEl = document.getElementById("legend-b1");
                Object.entries(catLabels).forEach(([k, v]) => {
                    const item = document.createElement("div");
                    item.className = "legend-item";
                    item.innerHTML = `<div class="legend-dot" style="background:${catColors[k]}"></div>${v}`;
                    legendEl.appendChild(item);
                });

                io.observe(svg);
            }

            // ── CHART B2: Scaling - mixed only ──
            function buildB2() {
                const svg = document.getElementById("chart-b2");
                const W = 440,
                    H = 260;
                const ml = 48,
                    mr = 20,
                    mt = 20,
                    mb = 50;
                const cw = W - ml - mr,
                    ch = H - mt - mb;

                const mixedData = benchmarks
                    .filter((d) => d.category === "mixed")
                    .sort((a, b) => a.totalErrors - b.totalErrors);

                const maxE = 100,
                    maxR = 100;

                // Grid
                [0, 25, 50, 75, 100].forEach((v) => {
                    const y = mt + ch - (v / maxR) * ch;
                    addLine(svg, ml, y, W - mr, y, { class: "grid-line" });
                    addText(svg, v + "%", ml - 6, y + 4, {
                        class: "axis-label",
                        "text-anchor": "end",
                    });
                });

                // X axis labels
                mixedData.forEach((d) => {
                    const x = ml + (d.totalErrors / maxE) * cw;
                    addText(svg, d.totalErrors, x, H - mb + 16, {
                        class: "axis-label",
                        "text-anchor": "middle",
                    });
                });
                addText(svg, "Total de Erros", ml + cw / 2, H - mb + 32, {
                    class: "axis-label",
                    "text-anchor": "middle",
                    fill: "var(--text-muted)",
                });
                addText(svg, "Reducao %", 12, mt + ch / 2, {
                    class: "axis-label",
                    "text-anchor": "middle",
                    transform: `rotate(-90, 12, ${mt + ch / 2})`,
                });

                // Area path
                const pts = mixedData.map((d) => ({
                    x: ml + (d.totalErrors / maxE) * cw,
                    y: mt + ch - (d.reductionPercent / maxR) * ch,
                }));

                const areaPath = [
                    `M ${pts[0].x} ${mt + ch}`,
                    ...pts.map((p) => `L ${p.x} ${p.y}`),
                    `L ${pts[pts.length - 1].x} ${mt + ch}`,
                    "Z",
                ].join(" ");

                const area = svgEl("path", {
                    d: areaPath,
                    fill: "rgba(59,130,246,0.15)",
                    class: "area-path",
                });
                svg.appendChild(area);

                const linePath = pts
                    .map((p, i) => `${i === 0 ? "M" : "L"} ${p.x} ${p.y}`)
                    .join(" ");
                const line = svgEl("path", {
                    d: linePath,
                    fill: "none",
                    stroke: "#3b82f6",
                    "stroke-width": 2.5,
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round",
                    class: "line-path",
                });
                svg.appendChild(line);

                // Dots & labels
                pts.forEach((p, i) => {
                    const d = mixedData[i];
                    const dot = svgEl("circle", {
                        cx: p.x,
                        cy: p.y,
                        r: 4,
                        fill: "#3b82f6",
                        stroke: "#fff",
                        "stroke-width": 2,
                    });
                    svg.appendChild(dot);
                    const lbl = svgEl("text", {
                        x: p.x,
                        y: p.y - 9,
                        class: "axis-label",
                        "text-anchor": "middle",
                        fill: "#3b82f6",
                        "font-weight": "700",
                    });
                    lbl.textContent = d.reductionPercent + "%";
                    svg.appendChild(lbl);
                });

                io.observe(svg);
            }

            // ── CHART B3: Grouped bar - normal vs compact ──
            function buildB3() {
                const svg = document.getElementById("chart-b3");
                const W = 900,
                    H = 280;
                const ml = 55,
                    mr = 20,
                    mt = 20,
                    mb = 60;
                const cw = W - ml - mr,
                    ch = H - mt - mb;
                const n = benchmarks.length;
                const gw = cw / n;
                const pad = gw * 0.15;
                const bw = (gw - pad) / 2 - 2;

                const maxTokens = Math.max(
                    ...benchmarks.map((d) => d.normalTokens),
                );

                // Grid
                [0, 1000, 2000, 3000, 4000].forEach((v) => {
                    if (v > maxTokens * 1.1) return;
                    const y = mt + ch - (v / (maxTokens * 1.05)) * ch;
                    addLine(svg, ml, y, W - mr, y, { class: "grid-line" });
                    addText(
                        svg,
                        v >= 1000 ? v / 1000 + "k" : v,
                        ml - 6,
                        y + 4,
                        { class: "axis-label", "text-anchor": "end" },
                    );
                });

                benchmarks.forEach((d, i) => {
                    const gx = ml + i * gw + pad / 2;
                    const scale = 1 / (maxTokens * 1.05);

                    // Normal bar
                    const nh = d.normalTokens * scale * ch;
                    const nb = svgEl("rect", {
                        x: gx,
                        y: mt + ch - nh,
                        width: bw,
                        height: nh,
                        fill: "#64748b",
                        rx: 2,
                        opacity: 0.8,
                        class: "bar-animated",
                        style: `transform-origin: ${gx + bw / 2}px ${mt + ch}px`,
                    });
                    svg.appendChild(nb);

                    // Compact bar
                    const ch2 = d.compactTokens * scale * ch;
                    const cx2 = gx + bw + 4;
                    const cb = svgEl("rect", {
                        x: cx2,
                        y: mt + ch - ch2,
                        width: bw,
                        height: ch2,
                        fill: "#22c55e",
                        rx: 2,
                        opacity: 0.9,
                        class: "bar-animated",
                        style: `transform-origin: ${cx2 + bw / 2}px ${mt + ch}px`,
                    });
                    svg.appendChild(cb);

                    // X label
                    const g = svgEl("g", {
                        transform: `translate(${gx + bw}, ${mt + ch + 10}) rotate(-35)`,
                    });
                    const lbl = svgEl("text", {
                        class: "axis-label",
                        "text-anchor": "end",
                        "font-size": "9",
                    });
                    lbl.textContent = d.scenarioLabel;
                    g.appendChild(lbl);
                    svg.appendChild(g);
                });

                io.observe(svg);
            }

            // ── CHART B4: Horizontal bar - category averages ──
            function buildB4() {
                const svg = document.getElementById("chart-b4");
                const W = 440,
                    H = 260;
                const ml = 110,
                    mr = 50,
                    mt = 20,
                    mb = 20;
                const cw = W - ml - mr,
                    ch = H - mt - mb;

                const cats = [
                    "ts-only",
                    "mixed",
                    "lint-only",
                    "ts-heavy",
                    "lint-heavy",
                ];
                const avgs = {
                    "lint-only": 51.2,
                    "ts-only": 25.8,
                    mixed: 58.4,
                    "lint-heavy": 78.5,
                    "ts-heavy": 75.6,
                };
                const bh = ch / cats.length;
                const pad = bh * 0.25;

                // Grid
                [0, 25, 50, 75, 100].forEach((v) => {
                    const x = ml + (v / 100) * cw;
                    addLine(svg, x, mt, x, mt + ch, { class: "grid-line" });
                    addText(svg, v + "%", x, mt + ch + 14, {
                        class: "axis-label",
                        "text-anchor": "middle",
                    });
                });

                cats.forEach((cat, i) => {
                    const y = mt + i * bh + pad / 2;
                    const bhi = bh - pad;
                    const bw2 = (avgs[cat] / 100) * cw;
                    const color = catColors[cat];

                    addText(svg, catLabels[cat], ml - 8, y + bhi / 2 + 4, {
                        class: "axis-label",
                        "text-anchor": "end",
                        fill: color,
                        style: "font-weight:600",
                    });

                    const rect = svgEl("rect", {
                        x: ml,
                        y: y,
                        width: bw2,
                        height: bhi,
                        fill: color,
                        rx: 4,
                        opacity: 0.85,
                        class: "h-bar-animated",
                        style: `transform-origin: ${ml}px ${y + bhi / 2}px`,
                    });
                    svg.appendChild(rect);

                    addText(
                        svg,
                        avgs[cat] + "%",
                        ml + bw2 + 6,
                        y + bhi / 2 + 4,
                        {
                            class: "axis-label",
                            fill: color,
                            style: "font-weight:700",
                        },
                    );
                });

                io.observe(svg);
            }

            // ── CHART B5: Session comparison ──
            function buildB5() {
                const svg = document.getElementById("chart-b5");
                const W = 900,
                    H = 200;
                const ml = 200,
                    mr = 80,
                    mt = 20,
                    mb = 30;
                const cw = W - ml - mr,
                    ch = H - mt - mb;

                const cases = [
                    {
                        label: "Caso 1: Refatoracao Checkbox",
                        traditional: 60071,
                        aicheck: 49492,
                    },
                    {
                        label: "Caso 2: Validacao e Correcao",
                        traditional: 73608,
                        aicheck: 22820,
                    },
                ];

                const maxVal = 80000;
                const bh = ch / cases.length;
                const pad = bh * 0.2;

                // Grid
                [0, 20000, 40000, 60000, 80000].forEach((v) => {
                    const x = ml + (v / maxVal) * cw;
                    addLine(svg, x, mt, x, mt + ch, { class: "grid-line" });
                    addText(
                        svg,
                        v >= 1000 ? Math.round(v / 1000) + "k" : v,
                        x,
                        mt + ch + 16,
                        {
                            class: "axis-label",
                            "text-anchor": "middle",
                        },
                    );
                });

                cases.forEach((c, i) => {
                    const y = mt + i * bh + pad / 2;
                    const bhi = (bh - pad) / 2 - 3;

                    addText(svg, c.label, ml - 8, y + bhi + 2, {
                        class: "axis-label",
                        "text-anchor": "end",
                        "font-size": "11",
                        "font-weight": "600",
                    });

                    // Traditional bar
                    const tw = (c.traditional / maxVal) * cw;
                    const tBar = svgEl("rect", {
                        x: ml,
                        y: y,
                        width: tw,
                        height: bhi,
                        fill: "#64748b",
                        rx: 3,
                        opacity: 0.8,
                        class: "h-bar-animated",
                        style: `transform-origin: ${ml}px ${y + bhi / 2}px`,
                    });
                    svg.appendChild(tBar);
                    addText(
                        svg,
                        c.traditional.toLocaleString("pt-BR"),
                        ml + tw + 6,
                        y + bhi / 2 + 4,
                        {
                            class: "axis-label",
                            "font-weight": "600",
                            fill: "#64748b",
                        },
                    );

                    // ai:check bar
                    const aw = (c.aicheck / maxVal) * cw;
                    const ay = y + bhi + 6;
                    const aBar = svgEl("rect", {
                        x: ml,
                        y: ay,
                        width: aw,
                        height: bhi,
                        fill: "#22c55e",
                        rx: 3,
                        opacity: 0.9,
                        class: "h-bar-animated",
                        style: `transform-origin: ${ml}px ${ay + bhi / 2}px`,
                    });
                    svg.appendChild(aBar);
                    addText(
                        svg,
                        c.aicheck.toLocaleString("pt-BR"),
                        ml + aw + 6,
                        ay + bhi / 2 + 4,
                        {
                            class: "axis-label",
                            "font-weight": "600",
                            fill: "#22c55e",
                        },
                    );
                });

                io.observe(svg);
            }

            // ── BENCH GRID ──
            let currentFilter = "all";
            let currentSort = "default";

            function getFilteredSorted() {
                let data = [...benchmarks];
                if (currentFilter !== "all")
                    data = data.filter((d) => d.category === currentFilter);
                switch (currentSort) {
                    case "reduction-desc":
                        data.sort(
                            (a, b) => b.reductionPercent - a.reductionPercent,
                        );
                        break;
                    case "reduction-asc":
                        data.sort(
                            (a, b) => a.reductionPercent - b.reductionPercent,
                        );
                        break;
                    case "errors-desc":
                        data.sort((a, b) => b.totalErrors - a.totalErrors);
                        break;
                    case "tokens-desc":
                        data.sort((a, b) => b.normalTokens - a.normalTokens);
                        break;
                }
                return data;
            }

            function makeMiniDonut(pct, color, size) {
                size = size || 60;
                const r = (size - 8) / 2;
                const cx = size / 2,
                    cy = size / 2;
                const circ = 2 * Math.PI * r;
                const dash = (pct / 100) * circ;

                const svg = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "svg",
                );
                svg.setAttribute("width", size);
                svg.setAttribute("height", size);
                svg.setAttribute("viewBox", `0 0 ${size} ${size}`);
                svg.classList.add("bench-donut-svg");

                const bg = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "circle",
                );
                bg.setAttribute("cx", cx);
                bg.setAttribute("cy", cy);
                bg.setAttribute("r", r);
                bg.setAttribute("fill", "none");
                bg.setAttribute("stroke", "var(--border)");
                bg.setAttribute("stroke-width", 6);
                svg.appendChild(bg);

                const arc = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "circle",
                );
                arc.setAttribute("cx", cx);
                arc.setAttribute("cy", cy);
                arc.setAttribute("r", r);
                arc.setAttribute("fill", "none");
                arc.setAttribute("stroke", color);
                arc.setAttribute("stroke-width", 6);
                arc.setAttribute("stroke-linecap", "round");
                arc.setAttribute("stroke-dasharray", `${dash} ${circ}`);
                arc.setAttribute("stroke-dashoffset", circ * 0.25); // start at top
                arc.setAttribute("transform", `rotate(-90 ${cx} ${cy})`);
                svg.appendChild(arc);

                const txt = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "text",
                );
                txt.setAttribute("x", cx);
                txt.setAttribute("y", cy + 4);
                txt.setAttribute("text-anchor", "middle");
                txt.setAttribute("font-size", "10");
                txt.setAttribute("font-weight", "700");
                txt.setAttribute("fill", color);
                txt.setAttribute("font-family", "var(--font)");
                txt.textContent = pct + "%";
                svg.appendChild(txt);

                return svg;
            }

            function renderBenchGrid() {
                const grid = document.getElementById("bench-grid");
                grid.innerHTML = "";
                const data = getFilteredSorted();
                data.forEach((d) => {
                    const card = document.createElement("div");
                    card.className = "bench-card";
                    card.setAttribute("data-cat", d.category);
                    card.setAttribute("data-scenario", d.scenario);
                    card.onclick = () => openModal(d);

                    const color = catColors[d.category];
                    const donut = makeMiniDonut(d.reductionPercent, color, 64);

                    card.innerHTML = `
      <div class="bench-card-top">
        <div>
          <div class="bench-label">${d.scenarioLabel}</div>
          <div class="bench-errs">${d.totalErrors} erro${d.totalErrors !== 1 ? "s" : ""} — ${d.filesChanged} arquivo${d.filesChanged !== 1 ? "s" : ""}</div>
        </div>
        <span class="bench-cat-badge" data-cat="${d.category}">${catLabels[d.category]}</span>
      </div>
      <div class="bench-donut-wrap" id="donut-wrap-${d.scenario}">
        <div class="bench-stats">
          <div class="bench-stat"><span class="bench-stat-label">Normal</span><span class="bench-stat-val">${d.normalTokens.toLocaleString("pt-BR")}</span></div>
          <div class="bench-stat"><span class="bench-stat-label">Compacto</span><span class="bench-stat-val" style="color:var(--accent-green)">${d.compactTokens.toLocaleString("pt-BR")}</span></div>
          <div class="bench-stat"><span class="bench-stat-label">Economizados</span><span class="bench-stat-val" style="color:var(--accent-green)">${d.savedTokens.toLocaleString("pt-BR")}</span></div>
        </div>
      </div>
      <div class="bench-footer">${d.diffSummary}</div>
    `;

                    const wrap = card.querySelector(
                        `#donut-wrap-${d.scenario}`,
                    );
                    wrap.insertBefore(donut, wrap.firstChild);
                    grid.appendChild(card);
                });
            }

            function filterBench(cat) {
                currentFilter = cat;
                document
                    .querySelectorAll(".filter-btn")
                    .forEach((b) =>
                        b.classList.toggle(
                            "active",
                            b.getAttribute("data-cat") === cat,
                        ),
                    );
                renderBenchGrid();
            }

            function sortBench(val) {
                currentSort = val;
                renderBenchGrid();
            }

            // ── MODAL ──
            function openModal(d) {
                const color = catColors[d.category];
                document.getElementById("modal-content").innerHTML = `
    <div class="modal-title">${d.scenarioLabel}</div>
    <div class="modal-cat">${catLabels[d.category]} &bull; ${d.totalErrors} erros &bull; ${d.filesChanged} arquivo${d.filesChanged !== 1 ? "s" : ""} modificado${d.filesChanged !== 1 ? "s" : ""}</div>
    <div class="modal-grid">
      <div class="modal-stat-card">
        <div class="modal-stat-label">Reducao de Tokens</div>
        <div class="modal-stat-val green">${d.reductionPercent}%</div>
      </div>
      <div class="modal-stat-card">
        <div class="modal-stat-label">Tokens Economizados</div>
        <div class="modal-stat-val green">${d.savedTokens.toLocaleString("pt-BR")}</div>
      </div>
      <div class="modal-stat-card">
        <div class="modal-stat-label">Tokens Normais</div>
        <div class="modal-stat-val">${d.normalTokens.toLocaleString("pt-BR")}</div>
      </div>
      <div class="modal-stat-card">
        <div class="modal-stat-label">Tokens Compactos</div>
        <div class="modal-stat-val" style="color:var(--accent-green)">${d.compactTokens.toLocaleString("pt-BR")}</div>
      </div>
      <div class="modal-stat-card">
        <div class="modal-stat-label">Erros TS</div>
        <div class="modal-stat-val">${d.tsErrors}</div>
      </div>
      <div class="modal-stat-card">
        <div class="modal-stat-label">Erros Lint</div>
        <div class="modal-stat-val">${d.lintErrors}</div>
      </div>
    </div>
    <div class="modal-code-section">
      <div class="modal-code-label">Comando Tradicional</div>
      <pre class="code-block">npm run lint:check:quiet ; npm run type:check</pre>
    </div>
    <div class="modal-code-section">
      <div class="modal-code-label">Comando ai:check</div>
      <pre class="code-block" style="border-color:var(--accent-green);color:var(--accent-green)">npm run ai:check</pre>
    </div>
    <div class="modal-code-section">
      <div class="modal-code-label">Resultado do Diff</div>
      <pre class="code-block">${d.diffSummary}</pre>
    </div>
  `;
                document.getElementById("modal-overlay").classList.add("open");
                document.body.style.overflow = "hidden";
            }

            function closeModal(e, force) {
                if (
                    force ||
                    (e && e.target === document.getElementById("modal-overlay"))
                ) {
                    document
                        .getElementById("modal-overlay")
                        .classList.remove("open");
                    document.body.style.overflow = "";
                }
            }

            document.addEventListener("keydown", (e) => {
                if (e.key === "Escape") closeModal(null, true);
            });

            // ── CASE EXPAND ──
            function toggleCase(id, btn) {
                const el = document.getElementById(id);
                const isOpen = el.classList.contains("open");
                el.classList.toggle("open", !isOpen);
                const sp = btn.querySelector("span");
                sp.textContent = isOpen ? "+" : "-";
            }

            // ── COLLAPSIBLE ──
            function toggleCollapsible(id) {
                const el = document.getElementById(id);
                el.classList.toggle("open");
            }

            // ── BENCH MATRIX TABLE ──
            function buildMatrix() {
                const tbody = document.getElementById("bench-matrix-body");
                benchmarks.forEach((d) => {
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
      <td>${d.scenarioLabel}</td>
      <td><span style="color:${catColors[d.category]};font-weight:600">${catLabels[d.category]}</span></td>
      <td>${d.totalErrors}</td>
      <td>${d.normalTokens.toLocaleString("pt-BR")}</td>
      <td style="color:var(--accent-green);font-weight:600">${d.compactTokens.toLocaleString("pt-BR")}</td>
      <td style="color:var(--accent-green);font-weight:600">${d.savedTokens.toLocaleString("pt-BR")}</td>
      <td style="color:var(--accent-green);font-weight:700">${d.reductionPercent}%</td>
    `;
                    tbody.appendChild(tr);
                });
            }

            // ── INIT ──
            window.addEventListener("DOMContentLoaded", () => {
                buildB1();
                buildB2();
                buildB3();
                buildB4();
                buildB5();
                renderBenchGrid();
                buildMatrix();
            });
        </script>
    </body>
</html>
